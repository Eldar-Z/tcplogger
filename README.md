# TCP Logger

Программа на Python, которая собирает информацию о трафике и количестве TCP подключений на порту с номером 2345.

## Установка

```bash
git clone https://github.com/Eldar-Z/tcplogger
cd tcplogger
```

## Использование

Используя make:
```bash
запуск программы--
make run

запуск тестирования--
make test
```

Без использования make:
```bash
запуск программы (аргументы берутся из файла config.txt)--
python3 main.py

запуск программы со своими аргументами--
python3 main.py <период_в_секундах> <название_файла.csv>
Пример:
python3 main.py 10 logs.csv

запуск тестирования--
python3 test.py <период> <количество_отправляемых_байт>
Пример:
python3 test.py 2 5
```

В файле config.txt можно задать период и путь к выходному файлу

## Файлы проекта

config.txt - конфиг-файл с входными параметрами для программы, сделан для выбора входных параметров при автозапуске программы.

main.py - основная программа для сбора данных о входящем/исходящем трафике и количестве подключений.

test.py - программа для тестирования программы сбора данных. Она случайным образом выбирает продолжительность работы и периоды тестируемой программы, запускает соединение и передачу данных по TCP (порт 2345), а после - сравнивает количество трафика, которое засчитала основная программа, и количество трафика, которое должно было пройти за время передачи данных.

check_ip.py - используется для получения ip-адреса сетевого интерфейса.

server.py и client.py - необходимы для тестирования, клиент отправляет данные серверу по TCP, используя ip-адрес сетевого интерфейса.

## Примечание

В .csv файле в столбце "количество подключений" значение "-1" означает то, что сервер на тот момент не был запущен.

При ошибке [1111] надо выключить соединения командой:
```bash
fuser -k 2345/tcp
```
